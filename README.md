# Gulp でフロント環境構築！

考えたことは、Pug,Stylus,TypeScript,Webpack の検討

## Pug

### メリット

Pug はシンプルでわかりやすく、Gulp にも簡単に入れることができ、テンプレートエンジンが優秀なのでオプションなどをつけなくとも Sass と同じように mixin や layout の機能を使うことができる。

PHP や Vue.js 入りのコードも生成できる。

### デメリット

HTML と見た目が変わりすぎることから初見に厳しいものとなる。大規模案件で Pug になると勉強コストが発生することから案件で使いにくい。

コードをググったり過去のコードなどを使うときにいちいち HTML を Pug に変換してくれるツールを使用しないといけない。(割と多くあって、地味にだるい...)

また、PHP や Vue.js のコードを一応生成できるがこれも同じくググったコードをそのまま使えない...。

### 結論

長期的に複数人や大規模案件やお客さんなどの使いやすさを考えるとそこまで導入はよくないかもしれない。

## Stylus

### メリット

Sass の書き方でも SCSS の書き方でも CSS の書き方でもいける。

そして、全てを許容しているからこそできることがある。それは、VSCode のフォーマット機能で SCSS と CSS のコードを全て Sass 風のものにフォーマットできることこれは本当に気持ちがいいです。

### デメリット

言語的に自由すぎて規約がないのでいろんな書き方を許容してしまい、バラバラになりがち。これは本当によくない。

正直 Sass とそこまで変わらない。

アップデートが 2016 年までで止まっている。（終わった...）

### 結論

使わないほうがいい。大人しく SCSS にしよう

## TypeScript

### メリット

正直、便利になるメリットはちゃんとした class が使えるくらい。(これはオブジェクト指向好きな自分としては割と嬉しい！)JS も Class はあるが IE だとダメになってしまうらしいので現実的には、なにかコンパイルをかまさないといけないのでそれならどうせなら TS でという話も出てきそうだ。

世界的にどんどん TS になっている流れなので世界基準を意識する意味では確実に導入しておいたほうがいい。(できないのと、できるけどしないのは全く違う)

### デメリット

少し勉強コストがかかる(そこまでかからない)

モジュールにいちいち(@types)を入れないといけない。(たまに typescript のモジュールがないやつがあるが自作で定義ファイルを書かないといけなくなる...)

いちいち環境構築がめんどくさくなりがち、今はやりやすいかもだが Nuxt.js も TS 化するのは結構しんどかったそう...。

Gulp で導入するとコンパイルのエラーを検出するのに 2 秒程度かかってしまう。アップデートされるかもしれないがこれは本当に致命的...。一応 Webpack も試したが導入するなら確実に Webpack にしたほうがいい。

## Webpack

### メリット

Webpack は、SPA などを作る際に JS ファイルなどを一気にまとめてくれてすごく便利でありつつも一応複数ファイルも書き出したりもできる。

別ファイルなども import で必要な分だけ集めて 1 ファイルにまとめられる。

npm のモジュールを普通の JS ファイルの中に入れることができる。(Vue.js も簡単に実装できる、単一コンポーネントも確認済み)

### デメリット

一応メインは、JS をまとめるとい言うことなので Gulp のように HTML テンプレートエンジンで HTML を吐き出すみたいなことはそこまで得意じゃない印象。
基本的には、Gulp のようにいろんなモジュールを使うのではなく、それぞれのモジュールを完結して使っていく印象なので制限みたいなのがあってやりにくく感じることもある。

HTML テンプレートエンジンは Gulp の方がいい気がする。
正直 Webpack の handlebars がちゃんと動くのであればそっちでもいいが今の所ちゃんとしたのはない。

### 結論

今回は、Handlebars が使いたかったのでちゃんと動くのは、Webpack にはなく Gulp には簡単なものがあったため Gulp にした。

## まとめ

この環境は、Gulp で Handlebars と SCSS だけにして JS は assets に入れる構成だ。
JS は基本 CDN から外部モジュールを引っ張ってきて使用する構成

もし、npm のモジュールが必要な時は、Gulp に Webpack を呼ぶ形にして TypeScript と一緒に入れてしまうのがいい。(Gulp で Browsery と TS はやめたほうがいい)

### この構成のメリット

- ググったコードをそのまま HTML に使えるところ
- Vue.js のコードも問題なく使える。(CDN のやつ)
- PHP のコードも普通にかける(WordPress も使えるはず)
- HTML のコードをコンポーネントとして管理できる。
